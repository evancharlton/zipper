(this["webpackJsonp@evancharlton/zipper"]=this["webpackJsonp@evancharlton/zipper"]||[]).push([[0],[,,,,,,,,,,,function(e,n,t){e.exports=t(23)},,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(6),c=t.n(o),u=t(2),i=(t(17),t(3)),l=Object(u.b)({key:"kommune-query",default:""}),s=Object(u.b)({key:"nummer-query",default:""}),f=Object(u.b)({key:"geojson",default:{type:"FeatureCollection",features:[],pending:!0}}),d=Object(u.c)({key:"geojson-filtered",get:function(e){var n=e.get,t=n(f),a=n(l);if(a)return function(e,n){var t=Object(i.a)({},e);return t.features=e.features.filter((function(e){return e.properties.navn.find((function(e){var t=e.navn;return"nor"===e.sprak&&t.toLowerCase().startsWith(n.toLowerCase())}))})),t}(t,a);var r=n(s);return r?function(e,n){var t=Object(i.a)({},e);return t.features=e.features.filter((function(e){return e.properties.postnummer.startsWith(n)})),t}(t,r):t}}),m=(Object(u.c)({key:"geojson-features",get:function(e){return(0,e.get)(d).features.map((function(e){var n,t,a=e.properties,r=a.lokalid,o=void 0===r?0:r,c=a.navn,u=void 0===c?[]:c;return{name:(null!==(n=null!==(t=u.find((function(e){return"nor"===e.sprak})))&&void 0!==t?t:u[0])&&void 0!==n?n:{navn:"404"}).navn,id:o}})).sort((function(e,n){var t=e.name,a=n.name;return t.localeCompare(a)})).filter((function(e,n,t){return 0===n||e.name!==t[n-1].name}))}}),Object(u.c)({key:"geojson-loaded",get:function(e){return!0!==(0,e.get)(f).pending}})),p=Object(u.b)({key:"mapbox-map",default:!1}),b=(t(18),function(){return r.a.createElement("span",{id:"forkongithub"},r.a.createElement("a",{href:"https://github.com/evancharlton/zipper"},"Fork me on GitHub"))}),v=(t(19),function(){var e=Object(u.e)(p),n=Object(u.e)(m);return e&&n?null:r.a.createElement("div",{className:"loading-layer"},r.a.createElement("div",{className:"lds-dual-ring"}),!e&&r.a.createElement("h3",null,"Loading map\u2026"),!n&&r.a.createElement("h3",null,"Loading data\u2026"))}),g=t(1),j=t(9),h=t.n(j);t(20);h.a.accessToken="pk.eyJ1IjoiZXZhbmNoYXJsdG9uIiwiYSI6ImNrZ205b2diejAyazQzNW9jajdud2J2NnMifQ.LwYUjS8uxTr2DxYoKoGykA";var y=[[4,57],[33,72]],k=function(){var e=Object(u.e)(d),n=Object(u.f)(p),t=Object(a.useState)(null),o=Object(g.a)(t,2),c=o[0],i=o[1],l=Object(a.useRef)(null),s=Object(a.useCallback)((function(e){l.current=e;var t=new h.a.Map({container:e,style:"mapbox://styles/mapbox/dark-v10",bounds:y});t.on("load",(function(){t.addSource("geojson-id",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:"layer-id",type:"line",source:"geojson-id",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#fff","line-width":2,"line-opacity":.25}}),i(t),n(!0)}))}),[l,n]);return Object(a.useEffect)((function(){e&&c&&c.getSource("geojson-id").setData(e)}),[e,c]),r.a.createElement("div",{ref:s,style:{height:"100%"}})},O=function(e){var n=e.placeholder,t=e.value,o=e.onChange,c=Object(a.useCallback)((function(e){o(e.target.value.replace(/[^0-9]/,""))}),[o]),u=Object(a.useCallback)((function(e){var n=e.currentTarget.value;if(n){var t=+n.charAt(n.length-1);switch(e.key){case"ArrowUp":t+=1;break;case"ArrowDown":t-=1}t=(t+10)%10,n=n.replace(/[0-9]$/,String(t)),o(String(n))}}),[o]);return r.a.createElement("input",{style:{backgroundColor:"transparent",fontSize:20,border:"1px solid #fff3",borderRadius:5,padding:5,color:"#fffa"},maxLength:4,inputMode:"numeric",onKeyDown:u,onChange:c,placeholder:n,value:t,autoFocus:!0})},E=(t(21),function(){var e=Object(u.d)(s),n=Object(g.a)(e,2),t=n[0],a=n[1];return r.a.createElement("div",{className:"search-area"},r.a.createElement(O,{placeholder:"Postnummer",value:t,onChange:a}))}),w=(t(22),function(){var e=Object(u.f)(f),n=Object(u.e)(p);return Object(a.useEffect)((function(){n&&fetch("".concat("/zipper","/postnummer.min.json")).then((function(e){return e.json()})).then((function(n){return e(n)}))}),[n,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(E,null),r.a.createElement(v,null),r.a.createElement(b,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,null,r.a.createElement(w,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.519578f3.chunk.js.map