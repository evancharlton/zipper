(this["webpackJsonp@evancharlton/zipper"]=this["webpackJsonp@evancharlton/zipper"]||[]).push([[0],[,,,,,,,,,,,function(e,n,t){e.exports=t(22)},,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(6),c=t.n(o),l=t(2),u=(t(17),t(1)),i=t(9),s=t.n(i),f=t(3),d=Object(l.b)({key:"kommune-query",default:""}),m=Object(l.b)({key:"geojson",default:{type:"FeatureCollection",features:[],pending:!0}}),b=Object(l.c)({key:"geojson-filtered",get:function(e){var n=e.get,t=n(m),a=n(d);return a?function(e,n){var t=Object(f.a)({},e);return t.features=e.features.filter((function(e){return e.properties.navn.find((function(e){return e.navn.toLowerCase().startsWith(n.toLowerCase())}))})),t}(t,a):t}}),p=Object(l.c)({key:"geojson-features",get:function(e){return(0,e.get)(b).features.map((function(e){var n,t=e.properties,a=t.lokalid,r=t.navn;return{name:(null!==(n=r.find((function(e){return"nor"===e.sprak})))&&void 0!==n?n:r[0]).navn,id:a}})).sort((function(e,n){var t=e.name,a=n.name;return t.localeCompare(a)}))}}),j=Object(l.c)({key:"geojson-loaded",get:function(e){return!0!==(0,e.get)(m).pending}}),v=Object(l.b)({key:"mapbox-map",default:!1});s.a.accessToken="pk.eyJ1IjoiZXZhbmNoYXJsdG9uIiwiYSI6ImNrZ205b2diejAyazQzNW9jajdud2J2NnMifQ.LwYUjS8uxTr2DxYoKoGykA";var g=[[4,57],[33,72]],h=function(){var e=Object(l.e)(b),n=Object(l.f)(v),t=Object(a.useState)(null),o=Object(u.a)(t,2),c=o[0],i=o[1],f=Object(a.useRef)(null),d=Object(a.useCallback)((function(e){f.current=e;var t=new s.a.Map({container:e,style:"mapbox://styles/mapbox/dark-v10",bounds:g});t.on("load",(function(){t.addSource("geojson-id",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:"layer-id",type:"line",source:"geojson-id",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#fff","line-width":2,"line-opacity":.25}}),i(t),n(!0)}))}),[f,n]);return Object(a.useEffect)((function(){e&&c&&c.getSource("geojson-id").setData(e)}),[e,c]),r.a.createElement("div",{ref:d,style:{height:"100%"}})},k=(t(18),t(19),function(){var e=Object(l.e)(p),n=Object(l.f)(d),t=Object(a.useCallback)((function(e){return function(){n(e)}}),[n]);return r.a.createElement("div",{className:"kommunes"},r.a.createElement("ul",{className:"kommune-list"},e.map((function(e){var n=e.name,a=e.id;return r.a.createElement("li",{key:a,className:"kommune-name"},r.a.createElement("button",{onClick:t(n)},n))}))))}),y=function(e){var n=e.placeholder,t=e.value,o=e.onChange,c=Object(a.useCallback)((function(e){o(e.target.value)}),[o]);return r.a.createElement("input",{style:{backgroundColor:"transparent",fontSize:20,border:"1px solid #fff3",borderRadius:5,padding:5,color:"#fffa"},onChange:c,placeholder:n,value:t})},O=function(){var e=Object(l.d)(d),n=Object(u.a)(e,2),t=n[0],a=n[1];return r.a.createElement(y,{placeholder:"Kommune",value:t,onChange:a})},E=(t(20),function(){var e=Object(l.e)(v),n=Object(l.e)(j);return e&&n?null:r.a.createElement("div",{className:"loading-layer"},r.a.createElement("div",{className:"lds-dual-ring"}),!e&&r.a.createElement("h3",null,"Loading map\u2026"),!n&&r.a.createElement("h3",null,"Loading data\u2026"))}),w=(t(21),function(e){var n=e.children;return r.a.createElement("div",{className:"sidebar"},n)}),C=function(){var e=Object(l.f)(m),n=Object(l.e)(v);return Object(a.useEffect)((function(){n&&fetch("".concat("/zipper","/kommune.json")).then((function(e){return e.json()})).then((function(n){return e(n)}))}),[n,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(w,null,r.a.createElement(O,null),r.a.createElement(k,null)),r.a.createElement(E,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.ae162611.chunk.js.map