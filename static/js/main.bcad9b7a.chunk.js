(this["webpackJsonp@evancharlton/zipper"]=this["webpackJsonp@evancharlton/zipper"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n.n(o),l=n(2),u=(n(17),n(3)),i=Object(l.b)({key:"nummer-query",default:""}),s=Object(l.c)({key:"nummer-query-pattern",get:function(e){for(var t=(0,e.get)(i);t.length<4;)t+="x";return t}}),f={type:"FeatureCollection",features:[]},d=Object(l.b)({key:"data-payload",default:{}}),p=Object(l.c)({key:"data-payload-loaded",get:function(e){var t;return(null!==(t=(0,e.get)(d).level)&&void 0!==t?t:0)>2}}),m=Object(l.c)({key:"geojson-filtered",get:function(e){var t=e.get,n=t(d)[t(s)];return n?{type:"FeatureCollection",name:"Zipper",features:n.map((function(e){return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[e]}}}))}:f}}),b=Object(l.b)({key:"mapbox-map",default:!1}),h=(n(18),function(){return r.a.createElement("span",{id:"forkongithub"},r.a.createElement("a",{href:"https://github.com/evancharlton/zipper"},"Fork me on GitHub"))}),g=(n(19),function(){var e=Object(l.e)(b),t=Object(l.e)(p);return e&&t?null:r.a.createElement("div",{className:"loading-layer"},r.a.createElement("div",{className:"lds-dual-ring"}),!e&&r.a.createElement("h3",null,"Loading map\u2026"),!t&&r.a.createElement("h3",null,"Loading data\u2026"))}),j=n(1),y=n(9),v=n.n(y);n(20);v.a.accessToken="pk.eyJ1IjoiZXZhbmNoYXJsdG9uIiwiYSI6ImNrZ205b2diejAyazQzNW9jajdud2J2NnMifQ.LwYUjS8uxTr2DxYoKoGykA";var O=[[4,57],[33,72]],k=function(){var e=Object(l.e)(m),t=Object(l.f)(b),n=Object(a.useState)(null),o=Object(j.a)(n,2),c=o[0],u=o[1],i=Object(a.useRef)(null),s=Object(a.useCallback)((function(e){i.current=e;var n=new v.a.Map({container:e,style:"mapbox://styles/mapbox/dark-v10",bounds:O});n.on("load",(function(){n.addSource("geojson-id",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.addLayer({id:"layer-id",type:"line",source:"geojson-id",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#fff","line-width":2,"line-opacity":.25}}),u(n),t(!0)}))}),[i,t]);return Object(a.useEffect)((function(){e&&c&&c.getSource("geojson-id").setData(e)}),[e,c]),r.a.createElement("div",{ref:s,style:{height:"100%"}})},E=function(e){var t=e.placeholder,n=e.value,o=e.onChange,c=Object(a.useCallback)((function(e){o(e.target.value.replace(/[^0-9]/,""))}),[o]),l=Object(a.useCallback)((function(e){var t=e.currentTarget.value;if(t){var n=+t.charAt(t.length-1);switch(e.key){case"ArrowUp":n+=1;break;case"ArrowDown":n-=1}n=(n+10)%10,t=t.replace(/[0-9]$/,String(n)),o(String(t))}}),[o]);return r.a.createElement("input",{style:{backgroundColor:"transparent",fontSize:20,border:"1px solid #fff3",borderRadius:5,padding:5,color:"#fffa"},maxLength:4,inputMode:"numeric",onKeyDown:l,onChange:c,placeholder:t,value:n,autoFocus:!0})},w=(n(21),function(){var e=Object(l.d)(i),t=Object(j.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"search-area"},r.a.createElement(E,{placeholder:"Postnummer",value:n,onChange:a}))}),C=(n(22),function(){var e=Object(l.f)(d),t=Object(l.e)(b);return Object(a.useEffect)((function(){if(t){var n=function(t){return fetch("".concat("/zipper","/clustered-").concat(t,".json")).then((function(e){return e.json()})).then((function(n){return e((function(e){return Object(u.a)({},e,{},n,{level:t})}))}))};n(0).then((function(){return n(1)})).then((function(){return n(2)})).then((function(){return n(3)})).then((function(){return n(4)}))}}),[t,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(w,null),r.a.createElement(g,null),r.a.createElement(h,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.bcad9b7a.chunk.js.map